<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copyleaks | Enterprise Content Authentication</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        cl: {
                            navy: '#254689',      /* Copyleaks Primary Navy */
                            blue: '#2096f3',      /* Copyleaks Action Blue */
                            purple: '#6c47ff',    /* AI Source Match Purple */
                            red: '#ff5252',       /* High Risk / AI */
                            orange: '#ff9800',    /* Medium Risk */
                            green: '#4caf50',     /* Human / Safe */
                            bg: '#f4f7fa',        /* Light Gray Background */
                            surface: '#ffffff'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scroll::-webkit-scrollbar-track {
            background: transparent;
        }

        .custom-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* --- Text Highlighting --- */
        .highlight-ai { background-color: rgba(255, 82, 82, 0.15); border-bottom: 2px solid rgba(255, 82, 82, 0.4); cursor: pointer; }
        .highlight-source-match { background-color: rgba(108, 71, 255, 0.15); border-bottom: 2px solid rgba(108, 71, 255, 0.4); cursor: pointer; }
        .highlight-plag { background-color: rgba(255, 152, 0, 0.15); border-bottom: 2px solid rgba(255, 152, 0, 0.4); cursor: pointer; }

        /* --- Image Scanning Animations --- */
        .scan-line {
            position: absolute; top: 0; left: 0; width: 100%; height: 4px;
            background: rgba(32, 150, 243, 0.8);
            box-shadow: 0 0 15px rgba(32, 150, 243, 0.8);
            animation: scan 2s linear infinite; z-index: 10; display: none;
        }
        @keyframes scan {
            0% { top: 0%; opacity: 0; }
            10% { opacity: 1; }
            90% { opacity: 1; }
            100% { top: 100%; opacity: 0; }
        }

        .heatmap-overlay {
            position: absolute; inset: 0; opacity: 0; transition: opacity 0.4s ease;
            pointer-events: none; z-index: 5; mix-blend-mode: normal;
        }
        .heatmap-active .heatmap-overlay { opacity: 1; }
        .heatmap-active .scan-line { display: block; }

        .comparison-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; width: 100%; height: 100%; }
        .comparison-item { position: relative; height: 100%; display: flex; flex-direction: column; gap: 8px; }
        .comparison-image { flex: 1; min-height: 0; border-radius: 8px; overflow: hidden; border: 1px solid #e2e8f0; background: white; }
        .comparison-image img { width: 100%; height: 100%; object-fit: contain; }

        /* Circular Progress Animation */
        circle { transition: stroke-dashoffset 1s ease-in-out; }
        .nav-active { background-color: rgba(32, 150, 243, 0.1); color: #2096f3; border-left: 4px solid #2096f3; }
        
        /* Toggle Switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: #2096f3;
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: #2096f3;
        }

        /* Dashboard Graphs */
        .trend-line {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: dash 2s ease-out forwards;
        }
        @keyframes dash {
            to { stroke-dashoffset: 0; }
        }
    </style>
</head>

<body class="bg-cl-bg text-slate-800 h-screen flex overflow-hidden">

    <!-- Sidebar -->
    <aside class="w-64 bg-white border-r border-slate-200 flex flex-col flex-shrink-0 z-20">
        <div class="h-16 flex items-center px-6 border-b border-slate-100">
            <!-- Copyleaks Logo -->
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR-ALCGF_aSJm-PYskbl2BC4yOZs5raGoP1LA&s" alt="Copyleaks" class="h-8 w-auto">
        </div>

        <nav class="flex-1 p-4 space-y-1 overflow-y-auto custom-scroll">
            
            <!-- Main Dashboards -->
            <div class="text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2 px-3 mt-2">Detection</div>
            
            <a href="#" onclick="switchView('dashboard')" id="nav-dashboard" class="nav-active flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors">
                <i class="fa-solid fa-chart-line w-4"></i>
                <span>Overview</span>
            </a>

            <a href="#" onclick="switchView('text')" id="nav-text" class="flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors">
                <i class="fa-solid fa-file-lines w-4"></i>
                <span>Text Analysis</span>
            </a>

            <a href="#" onclick="switchView('image')" id="nav-image" class="flex items-center gap-3 px-3 py-2.5 text-slate-600 hover:bg-slate-50 rounded-md text-sm font-medium transition-colors">
                <i class="fa-solid fa-image w-4"></i>
                <span>Image Detector</span>
            </a>

            <!-- Upload Tab -->
            <div class="text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2 mt-6 px-3">Actions</div>

            <a href="#" onclick="switchView('upload')" id="nav-upload" class="flex items-center gap-3 px-3 py-2.5 text-slate-600 hover:bg-slate-50 rounded-md text-sm font-medium transition-colors">
                <i class="fa-solid fa-cloud-arrow-up w-4"></i>
                <span>Upload File</span>
            </a>

            <div class="text-[11px] font-bold text-slate-400 uppercase tracking-wider mb-2 mt-6 px-3">Configuration</div>
            
            <a href="#" onclick="switchView('config')" id="nav-config" class="flex items-center gap-3 px-3 py-2.5 text-slate-600 hover:bg-slate-50 rounded-md text-sm font-medium transition-colors">
                <i class="fa-solid fa-gear w-4"></i>
                <span>Settings</span>
            </a>

            <a href="#" onclick="switchView('api')" id="nav-api" class="flex items-center gap-3 px-3 py-2.5 text-slate-600 hover:bg-slate-50 rounded-md text-sm font-medium transition-colors">
                <i class="fa-solid fa-key w-4"></i>
                <span>API Credentials</span>
            </a>
        </nav>

        <div class="p-4 border-t border-slate-100">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-slate-500 font-bold text-xs">JD</div>
                <div class="text-xs">
                    <div class="font-bold text-slate-700">John Doe</div>
                    <div class="text-slate-500">Enterprise Plan</div>
                </div>
            </div>
        </div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0">
        <!-- Header -->
        <header class="h-16 bg-white border-b border-slate-200 flex items-center justify-between px-8 flex-shrink-0">
            <div>
                <h1 class="text-lg font-bold text-slate-800" id="header-title">Executive Overview</h1>
                <p class="text-xs text-slate-500" id="header-subtitle">Real-time system performance and detection stats</p>
            </div>
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2 px-3 py-1 bg-green-50 text-green-700 rounded-full text-xs font-medium border border-green-200">
                    <span class="w-2 h-2 rounded-full bg-green-500"></span>
                    System Operational
                </div>
                <button class="text-slate-400 hover:text-slate-600"><i class="fa-regular fa-bell text-lg"></i></button>
            </div>
        </header>

        <!-- ========================= DASHBOARD VIEW ========================= -->
        <div class="flex-1 overflow-y-auto custom-scroll view-container bg-slate-50" id="view-dashboard">
            <div class="max-w-6xl mx-auto p-8">
                
                <!-- Top Metrics -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <!-- Total Scans -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden group">
                        <div class="absolute right-0 top-0 h-full w-1 bg-cl-blue"></div>
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Total Scans (30 Days)</p>
                                <h3 class="text-3xl font-black text-cl-navy mt-1" id="dash-scans">1,248</h3>
                            </div>
                            <div class="w-10 h-10 bg-cl-blue/10 rounded-lg flex items-center justify-center text-cl-blue">
                                <i class="fa-solid fa-layer-group text-lg"></i>
                            </div>
                        </div>
                        <div class="text-xs text-green-600 font-bold flex items-center">
                            <i class="fa-solid fa-arrow-trend-up mr-1"></i> +12.5% from last month
                        </div>
                    </div>

                    <!-- Flagged Content -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden">
                        <div class="absolute right-0 top-0 h-full w-1 bg-cl-red"></div>
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Flagged AI Content</p>
                                <h3 class="text-3xl font-black text-cl-red mt-1" id="dash-flagged">142</h3>
                            </div>
                            <div class="w-10 h-10 bg-cl-red/10 rounded-lg flex items-center justify-center text-cl-red">
                                <i class="fa-solid fa-triangle-exclamation text-lg"></i>
                            </div>
                        </div>
                        <div class="w-full bg-slate-100 rounded-full h-1.5 mt-2">
                            <div class="bg-cl-red h-1.5 rounded-full" style="width: 11.3%"></div>
                        </div>
                        <p class="text-[10px] text-slate-400 mt-2 text-right">11.3% Detection Rate</p>
                    </div>

                    <!-- Average Score -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden">
                        <div class="absolute right-0 top-0 h-full w-1 bg-cl-purple"></div>
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <p class="text-xs font-bold text-slate-400 uppercase tracking-wider">Avg. AI Confidence</p>
                                <h3 class="text-3xl font-black text-cl-purple mt-1" id="dash-avg">88.4%</h3>
                            </div>
                            <div class="w-10 h-10 bg-cl-purple/10 rounded-lg flex items-center justify-center text-cl-purple">
                                <i class="fa-solid fa-brain text-lg"></i>
                            </div>
                        </div>
                        <div class="text-xs text-slate-500">
                            Across all flagged content
                        </div>
                    </div>
                </div>

                <!-- Trend Chart -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="font-bold text-slate-800">AI Detection Trend</h3>
                        <select class="text-xs bg-slate-50 border border-slate-200 rounded p-1 text-slate-500">
                            <option>Last 7 Days</option>
                            <option>Last 30 Days</option>
                        </select>
                    </div>
                    <div class="h-64 w-full relative">
                        <!-- Simulated Chart -->
                        <svg viewBox="0 0 1000 200" class="w-full h-full overflow-visible">
                            <!-- Grid Lines -->
                            <line x1="0" y1="150" x2="1000" y2="150" stroke="#f1f5f9" stroke-width="1" />
                            <line x1="0" y1="100" x2="1000" y2="100" stroke="#f1f5f9" stroke-width="1" />
                            <line x1="0" y1="50" x2="1000" y2="50" stroke="#f1f5f9" stroke-width="1" />
                            
                            <!-- Area Gradient -->
                            <defs>
                                <linearGradient id="gradient" x1="0" x2="0" y1="0" y2="1">
                                    <stop offset="0%" stop-color="rgba(32, 150, 243, 0.2)" />
                                    <stop offset="100%" stop-color="rgba(32, 150, 243, 0)" />
                                </linearGradient>
                            </defs>
                            
                            <!-- Area Path -->
                            <path d="M0,150 Q100,120 200,140 T400,100 T600,60 T800,90 T1000,40 V200 H0 Z" fill="url(#gradient)" />
                            
                            <!-- Line Path -->
                            <path d="M0,150 Q100,120 200,140 T400,100 T600,60 T800,90 T1000,40" fill="none" stroke="#2096f3" stroke-width="3" class="trend-line" />
                            
                            <!-- Points -->
                            <circle cx="200" cy="140" r="4" fill="white" stroke="#2096f3" stroke-width="2" />
                            <circle cx="400" cy="100" r="4" fill="white" stroke="#2096f3" stroke-width="2" />
                            <circle cx="600" cy="60" r="4" fill="white" stroke="#2096f3" stroke-width="2" />
                            <circle cx="800" cy="90" r="4" fill="white" stroke="#2096f3" stroke-width="2" />
                        </svg>
                        
                        <!-- Axis Labels -->
                        <div class="flex justify-between text-[10px] text-slate-400 mt-2">
                            <span>Mon</span>
                            <span>Tue</span>
                            <span>Wed</span>
                            <span>Thu</span>
                            <span>Fri</span>
                            <span>Sat</span>
                            <span>Sun</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity Feed -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="p-6 border-b border-slate-100 bg-slate-50/50">
                        <h3 class="font-bold text-slate-800">Recent Analysis Activity</h3>
                    </div>
                    <div class="divide-y divide-slate-100" id="dash-recent-list">
                        <!-- JS Injected -->
                    </div>
                </div>

            </div>
        </div>

        <!-- ========================= TEXT ANALYSIS VIEW ========================= -->
        <div class="flex-1 flex overflow-hidden view-container" id="view-text">
            
            <!-- List Column -->
            <div class="w-80 bg-white border-r border-slate-200 flex flex-col flex-shrink-0">
                <div class="p-4 border-b border-slate-100">
                    <div class="relative">
                        <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"></i>
                        <input type="text" placeholder="Search reports..." class="w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded text-xs focus:outline-none focus:border-cl-blue transition-colors">
                    </div>
                </div>
                <div id="scan-list" class="flex-1 overflow-y-auto custom-scroll p-2 space-y-1">
                    <!-- JS Injected Items -->
                </div>
            </div>

            <!-- Workspace -->
            <div class="flex-1 flex flex-col bg-slate-50/50 relative">
                
                <!-- Toolbar -->
                <div class="h-12 bg-white border-b border-slate-200 flex items-center justify-between px-6 flex-shrink-0">
                    <div class="flex gap-4 text-xs font-medium text-slate-500">
                        <span><i class="fa-regular fa-clock mr-1"></i> <span id="scan-date">--</span></span>
                        <span><i class="fa-regular fa-file-lines mr-1"></i> <span id="word-count">-- words</span></span>
                    </div>
                </div>

                <!-- Editor/Viewer -->
                <div class="flex-1 overflow-y-auto custom-scroll p-8">
                    <div class="max-w-3xl mx-auto bg-white shadow-sm border border-slate-200 min-h-[600px] rounded-lg p-10">
                        <div id="text-viewer" class="font-serif text-lg leading-loose text-slate-800">
                            <!-- Content injected here -->
                        </div>
                    </div>
                </div>

            </div>

            <!-- Right Analytics Panel -->
            <div class="w-80 bg-white border-l border-slate-200 flex flex-col flex-shrink-0 overflow-y-auto custom-scroll">
                
                <div id="report-content" class="hidden">
                    <!-- Score Card -->
                    <div class="p-6 border-b border-slate-100 text-center relative overflow-hidden">
                        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cl-blue to-cl-purple"></div>
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">AI Probability Score</h3>
                        <div class="relative w-40 h-40 mx-auto mb-4">
                            <svg class="w-full h-full transform -rotate-90">
                                <circle cx="80" cy="80" r="70" stroke="#f1f5f9" stroke-width="12" fill="transparent" />
                                <circle id="score-ring" cx="80" cy="80" r="70" stroke="#254689" stroke-width="12" fill="transparent" stroke-dasharray="440" stroke-dashoffset="440" stroke-linecap="round" />
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <span class="text-4xl font-black text-cl-navy" id="score-display">--%</span>
                                <span class="text-[10px] font-bold text-slate-400 uppercase">Confidence</span>
                            </div>
                        </div>
                        <div id="verdict-badge" class="inline-block px-4 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-600">--</div>
                    </div>

                    <!-- Source Match (YES/NO Only - No Percentage) -->
                    <div class="p-6 border-b border-slate-100 bg-slate-50/50">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="text-sm font-bold text-cl-navy">Source Match</h4>
                        </div>
                        <div class="flex items-center justify-between bg-white p-3 rounded border border-slate-200 shadow-sm">
                            <span class="text-xs text-slate-500 font-medium">Match Found?</span>
                            <span id="source-match-value" class="text-sm font-black text-cl-purple uppercase">--</span>
                        </div>
                    </div>

                    <!-- Detailed Breakdown (Percentage bars for AI and Plag only) -->
                    <div class="p-6">
                        <h4 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Detection Breakdown</h4>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="font-bold text-slate-700">AI Content</span>
                                    <span class="font-bold text-cl-red" id="detail-ai">0%</span>
                                </div>
                                <div class="w-full bg-slate-100 rounded-full h-1.5 overflow-hidden">
                                    <div id="bar-ai" class="bg-cl-red h-1.5 rounded-full" style="width: 0%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-xs mb-1">
                                    <span class="font-bold text-slate-700">Plagiarism</span>
                                    <span class="font-bold text-orange-400" id="detail-plag">0%</span>
                                </div>
                                <div class="w-full bg-slate-100 rounded-full h-1.5 overflow-hidden">
                                    <div id="bar-plag" class="bg-orange-400 h-1.5 rounded-full" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================= IMAGE DETECTOR VIEW ========================= -->
        <div class="flex-1 flex overflow-hidden view-container hidden" id="view-image">
            
            <!-- List Column -->
            <div class="w-80 bg-white border-r border-slate-200 flex flex-col flex-shrink-0">
                <div class="p-4 border-b border-slate-100">
                    <div class="relative">
                        <i class="fa-solid fa-search absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 text-xs"></i>
                        <input type="text" placeholder="Search images..." class="w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-200 rounded text-xs focus:outline-none focus:border-cl-blue transition-colors">
                    </div>
                </div>
                <div id="image-list" class="flex-1 overflow-y-auto custom-scroll p-2 space-y-1">
                    <!-- JS Injected Items -->
                </div>
            </div>

            <!-- Workspace -->
            <div class="flex-1 flex flex-col bg-slate-50/50 relative">
                
                <div id="img-loading-overlay" class="absolute inset-0 bg-white/95 z-50 flex flex-col items-center justify-center hidden backdrop-blur-sm">
                    <div class="ring-animate w-16 h-16 bg-cl-blue rounded-full flex items-center justify-center mb-4 text-white text-2xl">
                        <i class="fa-solid fa-eye"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800">Processing Image</h3>
                    <p class="text-sm text-slate-500">Checking against Midjourney, DALL-E, and GAN patterns...</p>
                </div>

                <!-- Toolbar -->
                <div class="h-14 border-b border-slate-200 bg-white px-8 flex items-center justify-between flex-shrink-0 shadow-sm">
                    <div class="flex gap-8 text-[11px]">
                        <div><span class="text-slate-400 font-bold uppercase tracking-wider">Candidate</span> <span id="img-detail-author" class="font-bold text-slate-900 ml-2">--</span></div>
                        <div><span class="text-slate-400 font-bold uppercase tracking-wider">Status</span> <span id="img-detail-risk" class="ml-2">--</span></div>
                    </div>

                    <div id="img-toggle-container" class="opacity-0 transition-opacity">
                        <button onclick="toggleHeatmap()" id="heatmap-btn" class="flex items-center gap-2 px-3 py-1.5 rounded-full border border-slate-300 text-xs font-bold text-slate-600 hover:bg-slate-100 transition-all shadow-sm">
                            <i class="fa-solid fa-layer-group"></i> Toggle AI Heatmap
                        </button>
                    </div>
                </div>

                <!-- Image Area -->
                <div class="flex-1 overflow-hidden p-4 flex items-center justify-center bg-slate-100">
                    <div class="relative shadow-xl rounded-lg overflow-hidden border-4 border-white h-[95%] aspect-auto object-contain bg-white" id="image-container">
                        <!-- Image injected here -->
                    </div>
                </div>

            </div>

            <!-- Right Analytics Panel -->
            <div class="w-80 bg-white border-l border-slate-200 flex flex-col flex-shrink-0 overflow-y-auto custom-scroll">
                <div id="img-analysis-empty" class="p-10 text-center text-slate-400 mt-20">
                    <i class="fa-solid fa-chart-simple text-4xl mb-4 opacity-20"></i>
                    <p class="text-sm font-medium">Select an image to view<br>detailed risk analysis.</p>
                </div>

                <div id="img-analysis-content" class="hidden">
                    <!-- Probability Scores -->
                    <div class="p-8 border-b border-slate-100">
                        <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6">Probability Breakdown</h4>
                        <div class="space-y-6">
                            <div>
                                <div class="flex justify-between items-end mb-2">
                                    <span class="text-xs font-bold text-slate-500 uppercase">AI Generated</span>
                                    <span class="text-2xl font-black text-cl-red" id="img-score-ai">--%</span>
                                </div>
                                <div class="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                                    <div class="h-full bg-cl-red" id="img-bar-ai" style="width: 0%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between items-end mb-2">
                                    <span class="text-xs font-bold text-slate-500 uppercase">Human Origin</span>
                                    <span class="text-2xl font-black text-cl-green" id="img-score-human">--%</span>
                                </div>
                                <div class="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                                    <div class="h-full bg-cl-green" id="img-bar-human" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Detection Stats -->
                    <div class="p-8 border-b border-slate-100 bg-slate-50/30">
                        <h4 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">Scan Metadata</h4>
                        <div class="space-y-3">
                            <div class="flex justify-between text-xs">
                                <span class="text-slate-500">AI Flagged Pixels</span>
                                <span class="font-mono font-bold" id="img-stat-ai-pixels">--</span>
                            </div>
                            <div class="flex justify-between text-xs">
                                <span class="text-slate-500">Total Resolution</span>
                                <span class="font-mono font-bold" id="img-stat-total-pixels">--</span>
                            </div>
                            <div class="flex justify-between text-xs pt-2 border-t border-slate-200/50">
                                <span class="text-slate-500">Synthetic Coverage</span>
                                <span class="font-bold text-cl-blue" id="img-stat-coverage">--%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================= UPLOAD VIEW ========================= -->
        <div class="flex-1 flex flex-col items-center justify-center bg-white view-container hidden" id="view-upload">
            <div class="w-full max-w-2xl px-6">
                <div class="text-center mb-10">
                    <h2 class="text-2xl font-bold text-cl-navy mb-2">Upload File for Analysis</h2>
                    <p class="text-slate-500 text-sm">Supported formats: .txt, .pdf, .docx, .jpg, .png</p>
                </div>

                <!-- Dropzone -->
                <div onclick="document.getElementById('file-upload-input').click()" 
                     class="border-2 border-dashed border-slate-300 rounded-2xl p-16 flex flex-col items-center justify-center bg-slate-50 hover:bg-slate-100 hover:border-cl-blue cursor-pointer transition-all group">
                    
                    <div class="w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-cloud-arrow-up text-3xl text-cl-blue"></i>
                    </div>
                    <h3 class="font-bold text-slate-700 mb-1">Click to upload or drag and drop</h3>
                    <p class="text-xs text-slate-400">Maximum file size 50MB</p>
                    <input type="file" id="file-upload-input" class="hidden" onchange="handleFileUpload(event)">
                </div>

                <!-- Sim Progress -->
                <div id="upload-progress" class="mt-8 hidden">
                    <div class="flex justify-between text-xs font-bold text-slate-600 mb-2">
                        <span>Uploading & Processing...</span>
                        <span id="upload-percent">0%</span>
                    </div>
                    <div class="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                        <div id="upload-bar" class="h-full bg-cl-blue transition-all duration-300" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========================= CONFIG / SETTINGS VIEW ========================= -->
        <div class="flex-1 flex flex-col bg-slate-50 view-container hidden" id="view-config">
            <div class="max-w-4xl mx-auto w-full p-8 overflow-y-auto custom-scroll">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-cl-navy">System Configuration</h2>
                    <p class="text-sm text-slate-500">Manage detection sensitivity and parameters.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    
                    <!-- Text Settings -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                        <div class="flex items-center gap-3 mb-6 pb-4 border-b border-slate-100">
                            <div class="w-10 h-10 bg-cl-blue/10 rounded-lg flex items-center justify-center text-cl-blue">
                                <i class="fa-solid fa-file-lines text-lg"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-slate-800">Text Analysis Settings</h3>
                                <p class="text-xs text-slate-500">Configure text scanning engines</p>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="text-sm font-bold text-slate-700">Check for Plagiarism</div>
                                    <div class="text-xs text-slate-500">Compare against internet sources</div>
                                </div>
                                <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                    <input type="checkbox" name="toggle" id="toggle-plag" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300" checked/>
                                    <label for="toggle-plag" class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-300 cursor-pointer"></label>
                                </div>
                            </div>

                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="text-sm font-bold text-slate-700">Detect AI Content</div>
                                    <div class="text-xs text-slate-500">Identify GPT-4, Claude, Gemini patterns</div>
                                </div>
                                <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                    <input type="checkbox" name="toggle" id="toggle-ai-text" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-cl-blue" checked/>
                                    <label for="toggle-ai-text" class="toggle-label block overflow-hidden h-5 rounded-full bg-cl-blue cursor-pointer"></label>
                                </div>
                            </div>

                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="text-sm font-bold text-slate-700">Cross-Language Scan</div>
                                    <div class="text-xs text-slate-500">Detect translations across 30+ languages</div>
                                </div>
                                <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                    <input type="checkbox" name="toggle" id="toggle-lang" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-cl-blue" checked/>
                                    <label for="toggle-lang" class="toggle-label block overflow-hidden h-5 rounded-full bg-cl-blue cursor-pointer"></label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-xs font-bold text-slate-700 mb-2">Sensitivity Threshold</label>
                                <select class="w-full bg-slate-50 border border-slate-200 text-sm rounded-lg p-2.5">
                                    <option>Standard (Recommended)</option>
                                    <option>Strict</option>
                                    <option>Low Tolerance</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Image Settings -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                        <div class="flex items-center gap-3 mb-6 pb-4 border-b border-slate-100">
                            <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center text-purple-600">
                                <i class="fa-solid fa-image text-lg"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-slate-800">Image Detection Settings</h3>
                                <p class="text-xs text-slate-500">Configure visual analysis models</p>
                            </div>
                        </div>

                        <div class="space-y-6">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="text-sm font-bold text-slate-700">Detect Generative AI</div>
                                    <div class="text-xs text-slate-500">Midjourney, DALL-E, Stable Diffusion</div>
                                </div>
                                <div class="relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in">
                                    <input type="checkbox" name="toggle" id="toggle-genai" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-cl-blue" checked/>
                                    <label for="toggle-genai" class="toggle-label block overflow-hidden h-5 rounded-full bg-cl-blue cursor-pointer"></label>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <!-- ========================= API CREDENTIALS VIEW ========================= -->
        <div class="flex-1 flex flex-col bg-slate-50 view-container hidden" id="view-api">
            <div class="max-w-4xl mx-auto w-full p-8 overflow-y-auto custom-scroll">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold text-cl-navy">API Credentials</h2>
                    <p class="text-sm text-slate-500">Manage your API keys and access tokens.</p>
                </div>
                
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                     <h3 class="font-bold text-slate-800 mb-4">API Access Credentials</h3>
                     <div class="grid grid-cols-1 gap-6"> 
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Account Email</label>
                            <input type="email" value="admin@enterprise.com" disabled class="w-full p-2 bg-slate-50 border border-slate-200 rounded text-sm text-slate-600">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase mb-1">API Key</label>
                            <div class="relative">
                                <input type="password" value="************************" disabled class="w-full p-2 bg-slate-50 border border-slate-200 rounded text-sm text-slate-600 font-mono">
                                <button class="absolute right-2 top-1.5 text-xs text-cl-blue font-bold">Reveal</button>
                            </div>
                            <p class="text-xs text-slate-400 mt-2">Use this key to authenticate requests to the Copyleaks API. Do not share it.</p>
                        </div>
                     </div>
                     <div class="mt-6 flex justify-end gap-3">
                        <button class="px-4 py-2 border border-slate-300 text-slate-600 text-sm font-bold rounded-lg hover:bg-slate-50 transition-colors">Rotate Key</button>
                        <button class="px-6 py-2 bg-cl-navy text-white text-sm font-bold rounded-lg hover:bg-slate-800 transition-colors">Save Changes</button>
                     </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- TEXT DATA (NEWS MEDIA) ---
        const NEWS_MEDIA_DATA = [
            {
                id: "IP_ALERT_001",
                type: "Internal Document Scan",
                title: "Confidential: Project Orion Specs",
                date: "Just Now",
                words: 850,
                content: `<span class="highlight-plag">PROPRIETARY AND CONFIDENTIAL. The following specifications detail the solid-state electrolyte composition for the next-generation Orion cell architecture.</span> 
                <span class="highlight-source-match">The cathode material utilizes a high-nickel layered oxide, specifically LiNi0.9Co0.05Mn0.05O2, tailored for maximum energy density.</span> 
                <span class="highlight-ai">Experimental results indicate a 40% improvement in cycle life compared to conventional liquid electrolyte systems under rapid charging conditions.</span> 
                This document is classified as Level 4 Restricted and contains trade secrets protected under NDA #44-2024. Unauthorized distribution is strictly prohibited.`,
                analysis: { score: 99.5, sourceMatch: "Yes", ai: 99, sm: 85, plag: 12, verdict: "AI GENERATED" }
            },
            {
                id: "NEWS_001",
                type: "Digital Newspaper",
                title: "Breaking: Tech Merger Announced",
                date: "Oct 24, 2023",
                words: 450,
                content: `In a landmark deal that is set to reshape the technology landscape, Silicon Valley giants OmniCorp and FutureSystems have announced a definitive merger agreement valued at $45 billion. 
                <span class="highlight-source-match" title="AI Source Match">The consolidation of these two industry leaders is expected to accelerate advancements in quantum computing and generative artificial intelligence.</span> 
                Analysts predict that this move will trigger a wave of regulatory scrutiny across the European Union and the United States. 
                <span class="highlight-ai" title="AI Generated">This merger represents a strategic alignment of resources, combining OmniCorp's hardware infrastructure with FutureSystems' proprietary software algorithms to create a unified ecosystem.</span> 
                Shareholders expressed optimism as stocks surged 12% in pre-market trading immediately following the press release.`,
                analysis: { score: 98.2, sourceMatch: "Yes", ai: 85, sm: 13, plag: 0, verdict: "AI GENERATED" }
            },
            {
                id: "NEWS_002",
                type: "TV Broadcast Script",
                title: "Evening News: Local Election",
                date: "Oct 24, 2023",
                words: 210,
                content: `<span class="highlight-ai">(CAMERA 1 - ANCHOR)<br>Good evening. I'm Sarah Jenkins. Tonight, a surprising turn in the mayoral race.<br><br>(B-ROLL: VOTING BOOTHS)<br>Voter turnout has hit record highs in District 4, defying early polling models. We spoke to residents waiting in line for hours at the community center.</span>`,
                analysis: { score: 100.0, sourceMatch: "Yes", ai: 100, sm: 0, plag: 0, verdict: "AI GENERATED" }
            },
            {
                id: "NEWS_004",
                type: "Automated Financial Wire",
                title: "Market Closing Report: APAC",
                date: "Oct 23, 2023",
                words: 300,
                content: `<span class="highlight-source-match">Asian markets finished mixed on Tuesday as investors digested new economic data from China. The Hang Seng Index dropped 1.2% while the Nikkei 225 gained 0.5%.</span>
                <span class="highlight-ai">The technology sector led the gains in Tokyo, supported by strong earnings reports from semiconductor manufacturers.</span>`,
                analysis: { score: 100.0, sourceMatch: "Yes", ai: 90, sm: 10, plag: 0, verdict: "AI GENERATED" } 
            },
            {
                id: "TXT_NEW_001",
                type: "Marketing Copy",
                title: "Blog Post: 5 Tips for SEO",
                date: "Oct 22, 2023",
                words: 600,
                content: `<span class="highlight-ai">Search Engine Optimization (SEO) is the practice of increasing the quantity and quality of traffic to your website through organic search engine results. Here are five tips to improve your ranking: 1. Optimize for Keywords. 2. Create High-Quality Content. 3. Improve Site Speed.</span>`,
                analysis: { score: 100.0, sourceMatch: "Yes", ai: 100, sm: 20, plag: 5, verdict: "AI GENERATED" }
            },
            {
                id: "TXT_NEW_002",
                type: "Academic Paper",
                title: "Abstract: Quantum Mechanics",
                date: "Oct 21, 2023",
                words: 400,
                content: `<span class="highlight-ai">Quantum mechanics is a fundamental theory in physics that provides a description of the physical properties of nature at the scale of atoms and subatomic particles. It is the foundation of all quantum physics including quantum chemistry, quantum field theory, quantum technology, and quantum information science.</span>`,
                analysis: { score: 98.5, sourceMatch: "Yes", ai: 98, sm: 10, plag: 2, verdict: "AI GENERATED" }
            }
        ];

        // --- IMAGE DATA ---
        const IMAGE_DB = [
            {
                id: "IMG_008", author: "Earring Scan", type: "Product",
                imgSrc: "https://i.postimg.cc/RCWHtRYn/earring.png", 
                heatmapImgSrc: "https://i.postimg.cc/3rzDFGMy/earringafter.png",
                analysis: {
                    risk_label: "DETECTED", score_ai: 95.8, score_human: 4.2,
                    heatmapStyle: "background: radial-gradient(circle at 48% 72%, rgba(220, 38, 38, 0.6) 0%, rgba(220, 38, 38, 0.3) 20%, transparent 30%), linear-gradient(0deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.3));",
                    stats: { ai_pixels: "812,440", total_pixels: "1,032,192", coverage: "95.8%" }
                }
            },
            {
                id: "IMG_006", author: "Brad Pitt", type: "Deepfake",
                imgSrc: "https://i.postimg.cc/BZjKFgzt/before_bradpit.png", 
                heatmapImgSrc: "https://i.postimg.cc/G34yDQfR/after_bradpit.png",
                analysis: {
                    risk_label: "DETECTED", score_ai: 98.8, score_human: 1.2,
                    heatmapStyle: "background: radial-gradient(circle at 50% 40%, rgba(255, 82, 82, 0.6) 0%, rgba(255, 82, 82, 0.3) 40%, transparent 60%), linear-gradient(0deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.3));",
                    stats: { ai_pixels: "912,440", total_pixels: "1,032,192", coverage: "98.8%" }
                }
            },
            {
                id: "IMG_007", author: "Perfume Influencer", type: "Social",
                imgSrc: "https://i.postimg.cc/jdNngjKZ/perfumeinfluencer_beforepic.png", 
                heatmapImgSrc: "https://i.postimg.cc/fW10fd4y/perfumeinfluencer.png",
                analysis: {
                    risk_label: "DETECTED", score_ai: 92.5, score_human: 7.5,
                    heatmapStyle: "background: radial-gradient(circle at 50% 30%, rgba(220, 38, 38, 0.6) 0%, rgba(220, 38, 38, 0.3) 40%, transparent 60%);",
                    stats: { ai_pixels: "765,120", total_pixels: "1,032,192", coverage: "92.5%" }
                }
            },
            {
                id: "DL_004", author: "Robert Davidson - NY DL", type: "ID Verification",
                imgSrc: "https://i.postimg.cc/KvL3qYxS/dlbefore.jpg", 
                heatmapImgSrc: "https://i.postimg.cc/pX85GdRM/dlafter.png",
                analysis: {
                    risk_label: "DETECTED", score_ai: 94.2, score_human: 5.8,
                    heatmapStyle: "background: radial-gradient(circle at 18% 45%, rgba(255, 82, 82, 0.6) 0%, rgba(255, 82, 82, 0.4) 15%, transparent 25%), radial-gradient(circle at 82% 65%, rgba(255, 82, 82, 0.6) 0%, rgba(255, 82, 82, 0.4) 15%, transparent 25%);",
                    stats: { ai_pixels: "972,325", total_pixels: "1,032,192", coverage: "94.2%" }
                }
            },
            {
                id: "IMG_005", author: "Job Candidate", type: "ID Verification",
                imgSrc: "https://i.postimg.cc/WbrqW4j5/before.png", 
                heatmapImgSrc: "https://i.postimg.cc/dtdZH0vB/after.png",
                analysis: {
                    risk_label: "DETECTED", score_ai: 88.5, score_human: 11.5,
                    heatmapStyle: "background: radial-gradient(circle at 50% 50%, rgba(255, 82, 82, 0.5) 0%, rgba(255, 82, 82, 0.2) 50%, transparent 70%);",
                    stats: { ai_pixels: "542,100", total_pixels: "1,032,192", coverage: "52.5%" }
                }
            }
        ];

        let currentImgId = null;
        let isHeatmapActive = false;

        document.addEventListener('DOMContentLoaded', () => {
            renderScanList();
            renderImageList();
            renderDashboardActivity();
            loadReport(NEWS_MEDIA_DATA[0].id); // Load default text
            loadImgDoc(IMAGE_DB[0].id); // Load default image silently
            switchView('dashboard'); // Start on Dashboard
        });

        // --- NAVIGATION & VIEW LOGIC ---
        function switchView(view) {
            document.querySelectorAll('.view-container').forEach(el => el.classList.add('hidden'));
            document.getElementById(`view-${view}`).classList.remove('hidden');

            ['dashboard', 'text', 'image', 'upload', 'config', 'api'].forEach(v => {
                const el = document.getElementById(`nav-${v}`);
                if(el) el.className = "flex items-center gap-3 px-3 py-2.5 text-slate-600 hover:bg-slate-50 rounded-md text-sm font-medium transition-colors";
            });
            
            const activeEl = document.getElementById(`nav-${view}`);
            if(activeEl) activeEl.className = "nav-active flex items-center gap-3 px-3 py-2.5 rounded-md text-sm font-medium transition-colors";
            
            // Dynamic Header Text
            const titleEl = document.getElementById('header-title');
            const subTitleEl = document.getElementById('header-subtitle');
            
            if(view === 'dashboard') {
                titleEl.innerText = "Executive Overview";
                subTitleEl.innerText = "Real-time system performance and detection stats";
            } else if(view === 'text') {
                titleEl.innerText = "AI Text Detector";
                subTitleEl.innerText = "Advanced content authentication & plagiarism detection";
            } else if (view === 'image') {
                titleEl.innerText = "Image Integrity Detector";
                subTitleEl.innerText = "Visual analysis for Deepfakes and GenAI";
            } else if (view === 'upload') {
                titleEl.innerText = "File Upload";
                subTitleEl.innerText = "Add new content to the analysis queue";
            } else if (view === 'config') {
                titleEl.innerText = "System Configuration";
                subTitleEl.innerText = "Manage detection sensitivity and parameters";
            } else if (view === 'api') {
                titleEl.innerText = "API Credentials";
                subTitleEl.innerText = "Manage access keys and tokens";
            }
        }

        // --- DASHBOARD LOGIC ---
        function renderDashboardActivity() {
            const list = document.getElementById('dash-recent-list');
            list.innerHTML = '';
            
            // Combine recent items
            const recent = [
                ...NEWS_MEDIA_DATA.map(i => ({...i, category: 'Text'})), 
                ...IMAGE_DB.map(i => ({...i, title: i.author, category: 'Image'}))
            ].slice(0, 5);

            recent.forEach(item => {
                const isRisk = item.analysis.score_ai > 80 || item.analysis.score > 80;
                const riskColor = isRisk ? 'text-cl-red' : 'text-cl-green';
                const icon = item.category === 'Text' ? 'fa-file-lines' : 'fa-image';
                
                const div = document.createElement('div');
                div.className = "p-4 flex items-center justify-between hover:bg-slate-50 transition-colors";
                div.innerHTML = `
                    <div class="flex items-center gap-4">
                        <div class="w-8 h-8 rounded bg-slate-100 flex items-center justify-center text-slate-400">
                            <i class="fa-solid ${icon}"></i>
                        </div>
                        <div>
                            <div class="text-sm font-bold text-slate-800">${item.title || item.author}</div>
                            <div class="text-xs text-slate-500">${item.category}  ID: ${item.id}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-bold ${riskColor}">${item.analysis.verdict || item.analysis.risk_label}</div>
                        <div class="text-xs text-slate-400">Score: ${item.analysis.score || item.analysis.score_ai}%</div>
                    </div>
                `;
                list.appendChild(div);
            });

            // Calc Stats
            const total = 1248 + recent.length;
            const flagged = 142 + recent.filter(i => i.analysis.score_ai > 80 || i.analysis.score > 80).length;
            document.getElementById('dash-scans').innerText = total.toLocaleString();
            document.getElementById('dash-flagged').innerText = flagged.toLocaleString();
        }

        // --- UPLOAD LOGIC ---
        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const progressContainer = document.getElementById('upload-progress');
            const progressBar = document.getElementById('upload-bar');
            const progressText = document.getElementById('upload-percent');

            progressContainer.classList.remove('hidden');
            
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    // Simulation complete - Process file
                    setTimeout(() => {
                        processUploadedFile(file);
                        progressContainer.classList.add('hidden');
                        progressBar.style.width = '0%';
                        event.target.value = ''; // reset input
                    }, 500);
                } else {
                    width += 5;
                    progressBar.style.width = width + '%';
                    progressText.innerText = width + '%';
                }
            }, 50);
        }

        function processUploadedFile(file) {
            // Mock processing
            const newId = `UPLOAD_${Date.now()}`;
            const newItem = {
                id: newId,
                type: "Uploaded File",
                title: file.name,
                date: "Just Now",
                words: 320,
                content: `This is a simulated analysis of the uploaded file: <strong>${file.name}</strong>.<br><br>
                <span class="highlight-ai">The system has detected patterns consistent with AI generation in the introductory paragraph of this document.</span>
                <br><br>The remainder of the text appears to be human-written, though stylometry suggests multiple authors.`,
                analysis: { score: 88.5, sourceMatch: "No", ai: 80, sm: 0, plag: 8.5, verdict: "LIKELY AI" }
            };

            NEWS_MEDIA_DATA.unshift(newItem);
            renderScanList();
            switchView('text');
            loadReport(newId);
        }

        // --- TEXT FUNCTIONS ---
        function renderScanList() {
            const list = document.getElementById('scan-list');
            list.innerHTML = '';
            NEWS_MEDIA_DATA.forEach(item => {
                const el = document.createElement('div');
                let badgeClass = "bg-slate-100 text-slate-500";
                if(item.analysis.score > 80) badgeClass = "bg-red-50 text-cl-red";
                else if(item.analysis.score < 20) badgeClass = "bg-green-50 text-green-600";
                else badgeClass = "bg-orange-50 text-orange-500";
                
                el.className = "p-3 rounded-md border border-slate-200 bg-white hover:border-cl-blue cursor-pointer transition-all group mb-2";
                el.onclick = () => loadReport(item.id);
                el.innerHTML = `
                    <div class="flex justify-between items-start mb-1">
                        <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">${item.type}</span>
                        <span class="text-[9px] font-black px-1.5 py-0.5 rounded ${badgeClass}">${item.analysis.verdict}</span>
                    </div>
                    <div class="text-sm font-bold text-slate-700 group-hover:text-cl-navy mb-1 truncate">${item.title}</div>
                    <div class="text-[10px] text-slate-400">SM: <span class="${item.analysis.sourceMatch === 'Yes' ? 'text-cl-purple font-bold' : ''}">${item.analysis.sourceMatch}</span></div>
                `;
                list.appendChild(el);
            });
        }

        function loadReport(id) {
            const data = NEWS_MEDIA_DATA.find(d => d.id === id);
            if(!data) return;

            document.getElementById('scan-date').innerText = data.date;
            document.getElementById('word-count').innerText = data.words + " words";
            document.getElementById('text-viewer').innerHTML = data.content;
            document.getElementById('report-content').classList.remove('hidden');

            const circle = document.getElementById('score-ring');
            const circumference = 2 * Math.PI * 70;
            const offset = circumference - ((data.analysis.score / 100) * circumference);
            circle.style.strokeDashoffset = offset;
            circle.style.stroke = data.analysis.score > 80 ? "#ff5252" : (data.analysis.score < 20 ? "#4caf50" : "#ff9800");

            document.getElementById('score-display').innerText = data.analysis.score + "%";
            document.getElementById('verdict-badge').innerText = data.analysis.verdict;
            
            const smVal = document.getElementById('source-match-value');
            smVal.innerText = data.analysis.sourceMatch;
            smVal.className = data.analysis.sourceMatch === 'Yes' ? "text-sm font-black text-cl-purple uppercase" : "text-sm font-black text-slate-400 uppercase";

            updateBar('ai', data.analysis.ai);
            updateBar('plag', data.analysis.plag);
            // Removed SM Bar update as it was removed from DOM
        }

        function updateBar(type, val) {
            const el = document.getElementById(`detail-${type}`);
            if(el) el.innerText = val + "%";
            const bar = document.getElementById(`bar-${type}`);
            if(bar) bar.style.width = val + "%";
        }

        // --- IMAGE FUNCTIONS ---
        function renderImageList() {
            const list = document.getElementById('image-list');
            list.innerHTML = '';
            IMAGE_DB.forEach(doc => {
                const el = document.createElement('div');
                const riskColor = doc.analysis.risk_label === 'DETECTED' ? 'bg-cl-red' : 'bg-cl-green';
                
                el.className = "p-3 rounded-lg border border-slate-200 bg-white hover:border-cl-blue cursor-pointer mb-2 flex items-center gap-3 transition-all";
                el.onclick = () => loadImgDoc(doc.id);
                el.innerHTML = `
                    <img src="${doc.imgSrc}" class="w-10 h-10 rounded-full object-cover border border-slate-200">
                    <div class="flex-1 min-w-0">
                        <div class="flex justify-between items-center mb-0.5">
                            <span class="font-bold text-xs text-slate-800 truncate">${doc.author}</span>
                            <span class="${riskColor} text-white text-[9px] font-black px-1.5 py-0.5 rounded tracking-widest">${doc.analysis.risk_label}</span>
                        </div>
                        <div class="text-[10px] text-slate-500 truncate">${doc.type}</div>
                    </div>
                `;
                list.appendChild(el);
            });
        }

        function loadImgDoc(id) {
            currentImgId = id;
            const doc = IMAGE_DB.find(d => d.id === id);
            isHeatmapActive = false;
            
            // UI Reset
            document.getElementById('img-analysis-empty').classList.add('hidden');
            document.getElementById('img-analysis-content').classList.remove('hidden');
            document.getElementById('img-toggle-container').classList.add('opacity-0');
            
            const btn = document.getElementById('heatmap-btn');
            btn.innerHTML = `<i class="fa-solid fa-layer-group"></i> Toggle AI Heatmap`;
            btn.classList.remove('bg-cl-blue', 'text-white');
            btn.classList.add('hover:bg-slate-100', 'text-slate-600');

            // Simulate Loading
            const loader = document.getElementById('img-loading-overlay');
            loader.classList.remove('hidden');

            setTimeout(() => {
                loader.classList.add('hidden');
                document.getElementById('img-toggle-container').classList.remove('opacity-0');
                
                // Info
                document.getElementById('img-detail-author').innerText = doc.author;
                const riskEl = document.getElementById('img-detail-risk');
                riskEl.innerText = doc.analysis.risk_label;
                riskEl.className = `font-black text-[11px] uppercase ${doc.analysis.risk_label === 'DETECTED' ? 'text-cl-red' : 'text-cl-green'}`;

                // Image
                const container = document.getElementById('image-container');
                container.className = "relative shadow-xl rounded-lg overflow-hidden border-4 border-white h-[95%] aspect-auto object-contain bg-white";
                container.innerHTML = `
                    <div class="scan-line"></div>
                    <div class="heatmap-overlay" style="${doc.analysis.heatmapStyle || ''}"></div>
                    <img src="${doc.imgSrc}" class="w-full h-full object-cover">
                `;

                // Stats
                document.getElementById('img-score-ai').innerText = doc.analysis.score_ai + "%";
                document.getElementById('img-score-human').innerText = doc.analysis.score_human + "%";
                document.getElementById('img-bar-ai').style.width = doc.analysis.score_ai + "%";
                document.getElementById('img-bar-human').style.width = doc.analysis.score_human + "%";
                
                document.getElementById('img-stat-ai-pixels').innerText = doc.analysis.stats.ai_pixels;
                document.getElementById('img-stat-total-pixels').innerText = doc.analysis.stats.total_pixels;
                document.getElementById('img-stat-coverage').innerText = doc.analysis.stats.coverage;

            }, 600);
        }

        function toggleHeatmap() {
            const container = document.getElementById('image-container');
            const btn = document.getElementById('heatmap-btn');
            const doc = IMAGE_DB.find(d => d.id === currentImgId);
            isHeatmapActive = !isHeatmapActive;

            if (isHeatmapActive) {
                if (doc && doc.heatmapImgSrc) {
                    container.classList.remove('shadow-xl', 'rounded-lg', 'border-4', 'border-white', 'bg-white');
                    container.className = "w-full h-full comparison-grid";
                    container.innerHTML = `
                        <div class="comparison-item">
                            <div class="comparison-label">Original</div>
                            <div class="comparison-image shadow-lg"><img src="${doc.imgSrc}"></div>
                        </div>
                        <div class="comparison-item">
                            <div class="comparison-label text-cl-blue">AI Heatmap</div>
                            <div class="comparison-image shadow-lg border-blue-200"><img src="${doc.heatmapImgSrc}"></div>
                        </div>
                    `;
                } else {
                    container.classList.add('heatmap-active');
                }
                btn.classList.add('bg-cl-blue', 'text-white');
                btn.innerHTML = `<i class="fa-solid fa-layer-group"></i> Hide Heatmap`;
            } else {
                container.className = "relative shadow-xl rounded-lg overflow-hidden border-4 border-white h-[95%] aspect-auto object-contain bg-white";
                container.classList.remove('heatmap-active');
                container.innerHTML = `
                    <div class="scan-line"></div>
                    <div class="heatmap-overlay" style="${doc.analysis.heatmapStyle || ''}"></div>
                    <img src="${doc.imgSrc}" class="w-full h-full object-cover">
                `;
                btn.classList.remove('bg-cl-blue', 'text-white');
                btn.innerHTML = `<i class="fa-solid fa-layer-group"></i> Toggle AI Heatmap`;
            }
        }
    </script>
</body>
</html>